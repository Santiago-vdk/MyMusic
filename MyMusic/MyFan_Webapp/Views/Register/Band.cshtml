@model MyFan_Webapp.Models.Views.Form
@{
    Layout = null;
}

<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- jQuery -->
    <script src="~/assets/lib/jquery/jquery-2.2.4.min.js" type="text/javascript"></script>
    <!-- Bootstrap -->
    <link crossorigin="anonymous" href="~/assets/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <script src="~/assets/lib/bootstrap/js/bootstrap.min.js"></script>
    <!-- Style -->
    <link href="~/assets/common/css/MainStyle.css" rel="stylesheet" type="text/css">
    <link href="~/assets/common/css/registerStyle.css" rel="stylesheet" type="text/css">
    <!-- Font -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,300' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Bree+Serif' rel='stylesheet' type='text/css'>
    <!-- Bootstrap Select -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.10.0/css/bootstrap-select.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.10.0/js/bootstrap-select.min.js"></script>

    <title>MyFan</title>

    <script>
        function FormModel() {
            var self = this;
            self.inputUsername = $("#inputUsername").val();
            self.inputPassword = $("#inputPassword").val();
            self.inputConfirmPassword = $("#inputConfirmPassword").val();
            self.inputName = $("#inputName").val();
            self.inputHashtag = $("#inputHashtag").val();
            self.inputDateCreation = $("#inputDateCreation").val();
            self.selectCountry = parseInt($("#selectCountry :selected").attr('id'));

            var selectedGenres = [];
            $('#selectGenres :selected').each(function (i, selected) {
                selectedGenres[i] = parseInt($(selected).attr('id'));
            });
            self.selectGenres = selectedGenres;

            var inputMembers = [];
            $('#profs input').each(function () {
                var name = $(this).val();
                inputMembers.push(name);
            })
            inputMembers.splice(-1, 1);

            self.inputMembers = inputMembers;
            

            self.inputBiography = $("#inputBiography").val();

        }

        $(document).ready(function () {

            $('#submit').click(function () {
                var request = new FormModel();
                alert(request);
                $.ajax({
                    url: "RegisterBand",
                    dataType: 'text',
                    contentType: 'application/json',
                    type: "POST",
                    data: JSON.stringify(request),
                    success: function (data, status) {
                        window.location.href = "/";
                    },
                    error: function () {
                        alert('Something goes wrong!');
                    }
                });

                return false;
            });


            
        });

    </script>
    <script>

        $(document).ready(function () {


            var next = 1;
            $(".add-more").click(function (e) {
                e.preventDefault();
                var addto = "#field" + next;
                var addRemove = "#field" + (next);
                next = next + 1;
                var newIn = '<input autocomplete="off" class="input form-control" id="field' + next + '" placeholder="Member Name" name="field' + next + '" type="text">';
                var newInput = $(newIn);
                var removeBtn = '<button id="remove' + (next - 1) + '" class="btn btn-danger remove-me" >-</button></div><div id="field">';
                var removeButton = $(removeBtn);
                $(addto).after(newInput);
                $(addRemove).after(removeButton);
                $("#field" + next).attr('data-source', $(addto).attr('data-source'));
                $("#count").val(next);

                $('.remove-me').click(function (e) {
                    e.preventDefault();
                    var fieldNum = this.id.charAt(this.id.length - 1);
                    var fieldID = "#field" + fieldNum;
                    $(this).remove();
                    $(fieldID).remove();
                });
            });


        });
    </script>


    <style>
        * {
  .border-radius(0) !important;
}

#field {
    margin-bottom:10px;
}
      .input{
          width:90%;
          float:left;
      }
      .controls{
          width:72%;
          float: right;
          
      }
    </style>



</head>

<body>
    <div class="container">
        <div class="col-xs-6 col-xs-offset-3">


            <form action="" method="post" role="form" class='form-horizontal'>
                <h1>Register Band</h1>
                <br>
                <div class="form-group">
                    <div class="col-xs-3 text-right">
                        <label for="inputUsername">Username</label>
                    </div>
                    <div class="col-xs-9">
                        <input type="text" class="form-control" placeholder="Username" id="inputUsername" />
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-xs-3 text-right">
                        <label for="inputPassword">Password</label>
                    </div>
                    <div class="col-xs-9">
                        <input type="password" class="form-control" placeholder="Password" id="inputPassword" />
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-xs-3 text-right">
                        <label for="inputConfirmPassword">Confirm Password</label>
                    </div>
                    <div class="col-xs-9">
                        <input type="password" class="form-control" placeholder="Confirm Password" id="inputConfirmPassword" />
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-xs-3 text-right">
                        <label for="inputName">Band/Artist Name</label>
                    </div>
                    <div class="col-xs-9">
                        <input type="text" class="form-control" placeholder="Name" id="inputName" />
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-xs-3 text-right">
                        <label for="inputName">Hashtag</label>
                    </div>
                    <div class="col-xs-9">
                        <div class="input-group">
                            <span class="input-group-addon" id="sizing-addon2">#</span>
                            <input type="text" class="form-control" id="inputHashtag" placeholder="Hashtag" aria-describedby="sizing-addon2">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-xs-3 text-right">
                        <label for="inputBirthday">Year of Foundation</label>
                    </div>
                    <div class="col-xs-9">
                        <input type="date" id="inputDateCreation">
                    </div>
                </div>


                <div class="form-group">
                    <div class="col-xs-3 text-right">
                        <label for="selectCountry">Country</label>
                    </div>
                    <div class="col-xs-9">
                        <select class="selectpicker" data-live-search="true" id="selectCountry" data-width="100%">
                            @foreach (var country in Model.locations)
                            {
                                <option id="@country.Id" data-tokens="@country.Name">@country.Name</option>
                            }
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-xs-3 text-right">
                        <label for="selectMusicalGenre">Musical Genres</label>
                    </div>
                    <div class="col-xs-9">
                        <select class="selectpicker" data-live-search="true" id="selectGenres" title="Choose five musical genres" multiple data-max-options="5" data-width="100%">
                            @foreach (var genre in Model.genres)
                            {
                                <option id="@genre.Id" data-tokens="@genre.Name">@genre.Name</option>
                            }
                        </select>
                    </div>
                </div>


                <div class="form-group">
                    <div class="col-xs-3 text-right">
                        <label for="inputMembers">Members</label>
                    </div>

                    

                         
                               <input type="hidden" name="count" value="1">
                               <div class="control-group" id="fields">
                                   <div class="controls" id="profs">
                                       
                                           <div id="field">
                                                    <input autocomplete="off" class="input form-control" id="field1" name="prof1" type="text" placeholder="Member Name" data-items="8" />
                                                    <button id="b1" class="btn add-more" type="button">+</button>
                                            </div>
                                       <br>
                                   </div>
                        </div>
                            
                    </div>
              

                
                    
            


                <div class="form-group">
                    <div class="col-xs-3 text-right">
                        <label for="selectTerms">Biography</label>
                    </div>
                    <div class="col-xs-9">
                        <div class="form-group">
                            <textarea class="form-control" rows="5" id="inputBiography"></textarea>
                        </div>

                    </div>
                </div>

                <div class="form-group">
                    <div class="col-xs-3 text-right">
                        <label for="selectTerms">Accept terms</label>
                    </div>
                    <div class="col-xs-9">
                        <input type="checkbox" name="accept" value="Accept"> I accept the terms and conditions
                        <br>
                    </div>
                </div>

                <div class="form-group">
                    <div class="row">
                        <div class="col-xs-offset-4 col-xs-3">
                            <button id="submit" class="btn btn-success">Submit</button>
                        </div>
                        <div class="col-xs-3">
                            <a href="~/" type="submit" class="btn btn-danger">Cancel</a>
                        </div>
                    </div>
                </div>

                </form> 
                
</div>
    </div>

    <!-- /container -->
    
</body>

</html>
